#!/bin/bash -e

warn () { printf "%s\n" "$*" >&2; }

if [ -z "$1" ]; then
  warn "Usage: mscans <file>"
  exit 1
fi

if [ ! -f "$1" ]; then
  warn "No file: $1"
  exit 1
fi

while read -r range; do
  warn "[+] Scanning $range"
  sudo ~/Projects/masscan/bin/masscan "$range" -p80,443 2> /dev/null
done < "$1" | grep -oE '([0-9]{1,3}\.){3}[0-9]{1,3}' | sort -u
