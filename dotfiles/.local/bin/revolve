#!/bin/bash

if [ -z "$1" ]; then
  warn "Usage: revolve <file>"
  exit 1
fi

if [ ! -f "$1" ]; then
  warn "No file: $1"
  exit 1
fi

cat "$1" | xargs -n 1 -P 10 bash -c $'
  result="$(dig +short -x "$0")"

  if [[ "$result" =~ [0-9A-Za-z]+ ]]; then
    echo "$0,$result"
  fi'
