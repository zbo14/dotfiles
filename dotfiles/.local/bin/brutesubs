#!/bin/bash -e

if [ -z "$1" ]; then
  warn "Usage: brutesubs <domain>"
  exit 1
fi

tf="$(mktemp)"

while read -r sub; do
  echo "$sub.$1" >> "$tf"
done < ~/Projects/wordlists/subdomains.txt

~/Projects/massdns/bin/massdns \
  -o S \
  -r ~/Projects/massdns/lists/resolvers.txt \
  "$tf" \
  2> /dev/null \
  | cut -d ' ' -f1 \
  | rev \
  | cut -c2- \
  | rev

rm "$tf"
